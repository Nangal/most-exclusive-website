<template name='home'>
  <h1>Most Exclusive Website</h1>
  <h3>One visitor is allowed in at a time, and only for 1 minute.</h3>
  <div class='jumbotron'>
    <div class='row'>
      <div class='col-md-6 col-sm-12'>
        <p class='h2'>Currently serving ticket <b>#{{this.queueMeta.currentlyServingTicketNumber}}</b></p>
        {{#if $eq lineLength 1}}
          <p class='h2'>There is <b>{{lineLength}}</b> person in line.</p>
        {{else}}
          <p class='h2'>There are <b>{{lineLength}}</b> people in line.</p>
        {{/if}}
      </div>
      {{#if queueEntry}}
        <div class='col-sm-12'>
          {{#if isBeingServed}}
            <h2>You're in! You have exclusive access until {{> dateUTC value=this.queueMeta.timeCurrentTicketExpires format='h:mm:ss A'}}.</h2>
            {{#if hasPosted}}
              <p>Thanks for posting. Now kick back and enjoy your remaining moments of exclusivity and this cat gif prize.</p>
              <img src="http://thecatapi.com/api/images/get?format=src&type=gif&size=med" alt='cat gif prize'><img>
            {{else}}
              Post a message and receive a prize.
              {{> quickForm schema=postFormSchema type='method' meteormethod='postMessage'}}
            {{/if}}
          {{else}}
            <p>You are currently in line. Your ticket number is <b>#{{queueEntry.ticketNumber}}</b>.</p>
          {{/if}}
        </div>
      {{else}}
        <div class='col-md-6 col-sm-12'>
          {{#autoForm id='getInLine' schema=nameSchema type='method' meteormethod='getInQueue' class='form-inline'}}
            {{> afQuickField name='name' label-class="sr-only" afFieldInput-placeholder="schemaLabel" }}
            <button type='submit' class='btn btn-lg btn-info'>Take ticket #{{this.queueMeta.nextTicketNumber}}</button>
          {{/autoForm}}
        </div>
      {{/if}}
    </div>
  </div>
  <div class='jumbotron'>
    <h2>Most Recent Posts</h2>
    {{#each posts}}
      <div class='row'>
        <div class='col-md-12'>
          <h4>{{name}} - {{> dateUTC value=timeCreated format='MMM Do h:mm:ss A'}}</h4>
          <h6>{{message}}</h6>
          <hr>
        </div>
      </div>
    {{/each}}
  </div>
</template>
